<!--
    todo:
    - read layouts from json files and generate multiple?
  -->

<!DOCTYPE html>
<html>

<head>
    <title>Title</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <script src="generate-layout.js"></script>

    <br />
    <label for="txtInput">Type here:</label>
    <br />
    <input type="text" name="txtInput" id="txtInput" autofocus></input>

    <script>
        // add highlight
        document.addEventListener('keydown', (event) => {
            const keys = document.querySelectorAll(`td[data-key="${event.keyCode}"]`);
            keys.forEach((key) => {
                if (key) {
                    key.classList.add('playing')
                }
            })
        });

        // cleanup highlight
        document.addEventListener('keyup', (event) => {
            const keys = document.querySelectorAll(`td[data-key="${event.keyCode}"]`);
            keys.forEach((key) => {
                if (key) {
                    key.classList.remove('playing')
                }
            })
        });

        // // cleanup highlight (spammed keys get stuck)
        // const keys = document.querySelectorAll('td'); // todo: too general, should have class "key"?
        // keys.forEach(key => key.addEventListener('transitionend', (e) => {
        //     if (e.propertyName == 'transform') {
        //         key.classList.remove('playing');
        //     }
        // }));
    </script>

</body>

</html>